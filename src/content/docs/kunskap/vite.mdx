---
title: Byggverktyget Vite
author: efo
---

I denna övning tittar vi på hur vi kan använda byggverktyget vite för att bygga vår kod och hantera npm-moduler.



## Förkunskaper

Du har en fungerade labbmiljö efter kmom03 i ditt webapp-lager repo.



## Installera Vite

Vi börjar med att installera Vite som ett utvecklingsberoende (development dependency) med följande kommando.

```shell
## stå i webapp-lager
npm install -D vite
```

Efter att du har installerat kommandot kan vi dra igång vite med följande kommando i terminalen.

```shell
## stå i webapp-lager
npx vite
```

Nu startas en webbserver med hjälp av vite där du kan gå till din Lager-app i webbläsaren via den adress som visas i terminalen. Webbserver fungerar lite mer avancerat än `http-server` som vi har använt tidigare i kursen med kommandot `npm start`. Med vite webbservern får vi automatisk omladdning av webbläsaren om vi ändrar saker.

För att underlätta för start av vite webbservern lägger vi till två stycken script i `package.json`, min `script` del i `package.json` ser nu ut på detta sättet.

```json
"scripts": {
  "test": "echo \"Implement later\" && exit 0",
  "start": "http-server .",
  "posttest": "npm run eslint && npm run stylelint && npm run htmlhint",
  "eslint": "eslint",
  "eslint:fix": "eslint --fix",
  "stylelint": "stylelint \"**/*.css\"",
  "stylelint:fix": "stylelint --fix \"**/*.css\"",
  "htmlhint": "htmlhint \"**/*.html\"",
  "dev": "vite",
  "build": "vite build"
},
```

import { Aside } from '@astrojs/starlight/components';

<Aside type="caution">Kursmaterialet under denna rutan är under utveckling. Fortsätt inte under detta. Alla andra övningar bör gå att göra.</Aside>



## Bygga koden med vite

De som var skarpögda ser att vi även la in ett annat script än `npm run dev` scriptet. I detta fallet är det `build`, som kan användas för att skapa ett bygga av de kod. Då tas som vid `dev` scriptet utgångspunkt från `index.html` och all JavaScript och CSS som refereras därifrån och i alla underliggande filer och packas ihop till ett bygga i en `dist`-katalog.

Så om du testar att skapa ett bygge med `npm run build`, bör du kunna se en ny katalog i ditt webapp-lager repo.

För att vi inte vill ha med byggen till GitHub lägger vi in `dist/` i vår `.gitignore` fil. Min fil ser ut på detta sättet.

```
node_modules/
.env
dist/
```



## Driftsättning via GitHub Pages

Tidigare har vi bara laddat upp vår koden till GitHub och sedan har det bara automagiskt driftsatts med hjälp av filen `.github/workflows/static-deploy.yml`. För att det ska fungera även efter ett vite bygge behöver vi ändra lite i denna filen.

